<template>
  <section class="w-full h-full overflow-y-auto flex-1 p-3 sm:p-4 md:p-10 bg-lightGray">
    <h1 class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800 mb-3 sm:mb-4 md:mb-6">–ü–∞–Ω–µ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>

    <div v-if="!currentAdmin" class="text-center py-16 text-gray-500">
      <p>–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</p>
    </div>

    <div v-else class="space-y-4 sm:space-y-5 md:space-y-6">
      <!-- –ü—Ä–æ—Ñ—ñ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6">
        <div class="flex flex-col sm:flex-row items-start gap-3 sm:gap-4 md:gap-6">
          <div class="w-14 h-14 sm:w-16 sm:h-16 md:w-20 md:h-20 rounded-full bg-red-500/20 flex items-center justify-center flex-shrink-0 mx-auto sm:mx-0">
            <span class="text-red-600 text-xl sm:text-2xl md:text-3xl font-bold">
              {{ currentAdmin.email.charAt(0).toUpperCase() }}
            </span>
          </div>
          <div class="flex-1 min-w-0 w-full">
            <h2 class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-gray-800 mb-1.5 sm:mb-2 text-center sm:text-left break-words">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º–∏</h2>
            <p class="text-gray-500 text-xs sm:text-sm mb-3 sm:mb-4 break-all text-center sm:text-left">{{ currentAdmin.email }}</p>
            <div class="flex flex-col sm:flex-row items-center sm:items-start gap-2 sm:gap-3 md:gap-4 flex-wrap">
              <div class="flex items-center gap-1.5 sm:gap-2">
                <span class="text-xs sm:text-sm text-gray-500">–°—Ç–∞—Ç—É—Å:</span>
                <span class="px-2 py-0.5 sm:py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">
                  –ê–∫—Ç–∏–≤–Ω–∏–π
                </span>
              </div>
              <div class="flex items-center gap-1.5 sm:gap-2">
                <span class="text-xs sm:text-sm text-gray-500">–í–µ—Ä—Å—ñ—è —Å–∏—Å—Ç–µ–º–∏:</span>
                <span class="text-sm sm:text-base md:text-lg font-bold text-savoy">2.1.0</span>
              </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º–∏ -->
            <div class="mt-4 sm:mt-5 md:mt-6 pt-4 sm:pt-5 md:pt-6 border-t border-gray-200">
              <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4">
                <div class="bg-gray-50 rounded-lg p-3 sm:p-4">
                  <div class="flex flex-col lg:flex-row lg:items-center gap-2 lg:gap-3 items-center text-center lg:text-left">
                    <span class="text-lg sm:text-xl md:text-2xl flex-shrink-0">üë•</span>
                    <div class="flex-1 min-w-0 flex flex-col lg:flex-row lg:items-center lg:gap-2 items-center lg:items-start">
                      <p class="text-xs text-gray-500">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</p>
                      <p class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">{{ totalUsersCount }}</p>
                    </div>
                  </div>
                  <p class="text-xs text-gray-600 mt-1.5 sm:mt-2 text-center lg:text-left">
                    {{ partnersCount }} –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤, {{ studentsCount }} —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤, {{ teachersCount }} –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤
                  </p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-3 sm:p-4">
                  <div class="flex flex-col lg:flex-row lg:items-center gap-2 lg:gap-3 items-center text-center lg:text-left">
                    <span class="text-lg sm:text-xl md:text-2xl flex-shrink-0">üìä</span>
                    <div class="flex-1 min-w-0 flex flex-col lg:flex-row lg:items-center lg:gap-2 items-center lg:items-start">
                      <p class="text-xs text-gray-500">–ü—Ä–æ—î–∫—Ç–∏</p>
                      <p class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">{{ projectsCount }}</p>
                    </div>
                  </div>
                  <p class="text-xs text-gray-600 mt-1.5 sm:mt-2 text-center lg:text-left">
                    {{ activeProjectsCount }} –∞–∫—Ç–∏–≤–Ω–∏—Ö, {{ completedProjectsCount }} –∑–∞–≤–µ—Ä—à–µ–Ω–∏—Ö
                  </p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-3 sm:p-4">
                  <div class="flex flex-col lg:flex-row lg:items-center gap-2 lg:gap-3 items-center text-center lg:text-left">
                    <span class="text-lg sm:text-xl md:text-2xl flex-shrink-0">‚öôÔ∏è</span>
                    <div class="flex-1 min-w-0 flex flex-col lg:flex-row lg:items-center lg:gap-2 items-center lg:items-start">
                      <p class="text-xs text-gray-500">–°–∏—Å—Ç–µ–º–∞</p>
                      <p class="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">–ê–∫—Ç–∏–≤–Ω–∞</p>
                    </div>
                  </div>
                  <p class="text-xs text-gray-600 mt-1.5 sm:mt-2 text-center lg:text-left">
                    –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –ø—Ä–∞—Ü—é—é—Ç—å
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –®–≤–∏–¥–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è -->
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        <NuxtLink
          to="/admin/students"
          class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"
        >
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <span class="text-2xl">üë®‚Äçüéì</span>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800">–°—Ç—É–¥–µ–Ω—Ç–∏</h3>
              <p class="text-sm text-gray-600">{{ studentsCount }} –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>
            </div>
          </div>
        </NuxtLink>

        <NuxtLink
          to="/admin/teachers"
          class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"
        >
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
              <span class="text-2xl">üë®‚Äçüè´</span>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800">–í–∏–∫–ª–∞–¥–∞—á—ñ</h3>
              <p class="text-sm text-gray-600">{{ teachersCount }} –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>
            </div>
          </div>
        </NuxtLink>

        <NuxtLink
          to="/admin/partners"
          class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow"
        >
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
              <span class="text-2xl">ü§ù</span>
            </div>
            <div>
              <h3 class="font-semibold text-gray-800">–ü–∞—Ä—Ç–Ω–µ—Ä–∏</h3>
              <p class="text-sm text-gray-600">{{ partnersCount }} –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</p>
            </div>
          </div>
        </NuxtLink>
      </div>

      <!-- –†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6">
        <h3 class="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-3 sm:mb-4">–†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤</h3>
        <div v-if="topStudents.length === 0" class="text-center py-8 text-gray-500">
          <p class="text-sm sm:text-base">–ù–µ–º–∞—î —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤</p>
        </div>
        <div v-else class="space-y-2 sm:space-y-3">
          <div
            v-for="(student, index) in topStudents"
            :key="student.id"
            class="flex items-center gap-3 sm:gap-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"
          >
            <div class="flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0"
                 :class="getRankColor(index)">
              <span class="text-xs sm:text-sm font-bold text-white">{{ index + 1 }}</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="font-semibold text-sm sm:text-base text-gray-800">{{ student.fullName }}</p>
              <p class="text-xs sm:text-sm text-gray-600">{{ student.course }} –∫—É—Ä—Å, {{ student.specialty }}</p>
            </div>
            <div class="flex items-center gap-2 flex-shrink-0">
              <div class="flex items-center gap-1">
                <span class="text-amber-500 text-sm sm:text-base">‚òÖ</span>
                <span class="text-sm sm:text-base font-bold text-gray-800">{{ student.rating.toFixed(1) }}</span>
              </div>
            </div>
          </div>
        </div>
        <div v-if="topStudents.length > 0" class="mt-4 pt-4 border-t border-gray-200">
          <NuxtLink
            to="/admin/students"
            class="text-sm sm:text-base text-savoy hover:text-savoy/80 transition-colors font-semibold"
          >
            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ—Ö —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ ‚Üí
          </NuxtLink>
        </div>
      </div>

      <!-- –û—Å—Ç–∞–Ω–Ω—ñ –ø–æ–¥—ñ—ó -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-3 sm:p-4 md:p-6">
        <h3 class="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-3 sm:mb-4">–û—Å—Ç–∞–Ω–Ω—ñ –ø–æ–¥—ñ—ó</h3>
        <div v-if="notifications.length === 0" class="text-center py-8 text-gray-500">
          <p class="text-sm sm:text-base">–ù–µ–º–∞—î –ø–æ–¥—ñ–π</p>
          <p class="text-xs sm:text-sm mt-2">–ü–æ–¥—ñ—ó —Å–∏—Å—Ç–µ–º–∏ –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è —Ç—É—Ç</p>
        </div>
        <div v-else class="space-y-3">
          <div
            v-for="notification in notifications"
            :key="notification.id"
            class="flex items-start gap-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"
          >
            <div class="w-2 h-2 rounded-full flex-shrink-0 mt-2" :class="getNotificationColor(notification.type)"></div>
            <div class="flex-1 min-w-0">
              <p class="font-semibold text-sm sm:text-base text-gray-800">{{ notification.title }}</p>
              <p class="text-xs sm:text-sm text-gray-600 mt-1">{{ notification.message }}</p>
              <p class="text-xs text-gray-500 mt-1">{{ formatTime(notification.createdAt) }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import { computed, onMounted } from "vue";
import { useProjectsStore } from "~~/stores/projects";
import { useAuthStore } from "~~/stores/auth";
import type { AdminNotification, User } from "~~/types";

const projectsStore = useProjectsStore();
const authStore = useAuthStore();

// –ö–æ–º–ø'—é—Ç–µ–¥ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ
const currentAdmin = computed(() => {
  if (!authStore.currentUser || authStore.currentUser.role !== "admin") {
    return null;
  }
  return authStore.currentUser as User;
});

const partnersCount = computed(() => projectsStore.partners.length);
const studentsCount = computed(() => projectsStore.students.length);
const teachersCount = computed(() => projectsStore.teachers.length);
const totalUsersCount = computed(() => 
  partnersCount.value + studentsCount.value + teachersCount.value + 1 // +1 –¥–ª—è –∞–¥–º—ñ–Ω–∞
);
const projectsCount = computed(() => projectsStore.projects.length);
const activeProjectsCount = computed(() => 
  projectsStore.projects.filter(p => p.status === 'active').length
);
const completedProjectsCount = computed(() => 
  projectsStore.projects.filter(p => p.status === 'completed').length
);

// –î–µ–º–æ-–¥–∞–Ω—ñ –¥–ª—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –ø–æ–¥—ñ–π
const getDemoNotifications = (): AdminNotification[] => {
  const now = new Date();
  return [
    {
      id: "notif-1",
      title: "–ù–æ–≤–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π",
      message: "–ö–æ–º–ø–∞–Ω—ñ—è 'Digital Innovations' –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–ª–∞—Å—å —è–∫ –ø–∞—Ä—Ç–Ω–µ—Ä",
      read: false,
      createdAt: new Date(now.getTime() - 1 * 60 * 60 * 1000), // 1 –≥–æ–¥–∏–Ω–∞ —Ç–æ–º—É
      type: "new_user_registration",
      userId: "partner-new-1",
    },
    {
      id: "notif-2",
      title: "–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç",
      message: "–ü–∞—Ä—Ç–Ω–µ—Ä 'Tech Solutions Ukraine' —Å—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ—î–∫—Ç '–†–æ–∑—Ä–æ–±–∫–∞ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏'",
      read: false,
      createdAt: new Date(now.getTime() - 3 * 60 * 60 * 1000), // 3 –≥–æ–¥–∏–Ω–∏ —Ç–æ–º—É
      type: "project_created",
      projectId: "project-new-1",
    },
    {
      id: "notif-3",
      title: "–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç",
      message: "–ü–∞—Ä—Ç–Ω–µ—Ä 'Creative Design Studio' —Å—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ—î–∫—Ç '–†–µ–¥–∏–∑–∞–π–Ω –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–∞–π—Ç—É'",
      read: false,
      createdAt: new Date(now.getTime() - 6 * 60 * 60 * 1000), // 6 –≥–æ–¥–∏–Ω —Ç–æ–º—É
      type: "project_created",
      projectId: "project-new-2",
    },
    {
      id: "notif-4",
      title: "–ù–æ–≤–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π",
      message: "–ö–æ–º–ø–∞–Ω—ñ—è 'Startup Hub' –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–ª–∞—Å—å —è–∫ –ø–∞—Ä—Ç–Ω–µ—Ä",
      read: false,
      createdAt: new Date(now.getTime() - 12 * 60 * 60 * 1000), // 12 –≥–æ–¥–∏–Ω —Ç–æ–º—É
      type: "new_user_registration",
      userId: "partner-new-2",
    },
    {
      id: "notif-5",
      title: "–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç",
      message: "–ü–∞—Ä—Ç–Ω–µ—Ä 'Tech Solutions Ukraine' —Å—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ—î–∫—Ç 'E-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∂—É –æ–¥—è–≥—É'",
      read: false,
      createdAt: new Date(now.getTime() - 24 * 60 * 60 * 1000), // 1 –¥–µ–Ω—å —Ç–æ–º—É
      type: "project_created",
      projectId: "project-new-3",
    },
    {
      id: "notif-6",
      title: "–°—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç",
      message: "–ü–∞—Ä—Ç–Ω–µ—Ä 'Creative Design Studio' —Å—Ç–≤–æ—Ä–∏–≤ –ø—Ä–æ—î–∫—Ç '–õ–µ–Ω–¥—ñ–Ω–≥-—Å—Ç–æ—Ä—ñ–Ω–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø—É'",
      read: false,
      createdAt: new Date(now.getTime() - 2 * 24 * 60 * 60 * 1000), // 2 –¥–Ω—ñ —Ç–æ–º—É
      type: "project_created",
      projectId: "project-new-4",
    },
    {
      id: "notif-7",
      title: "–ù–æ–≤–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π",
      message: "–ö–æ–º–ø–∞–Ω—ñ—è 'Web Agency Pro' –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞–ª–∞—Å—å —è–∫ –ø–∞—Ä—Ç–Ω–µ—Ä",
      read: false,
      createdAt: new Date(now.getTime() - 3 * 24 * 60 * 60 * 1000), // 3 –¥–Ω—ñ —Ç–æ–º—É
      type: "new_user_registration",
      userId: "partner-new-3",
    },
  ];
};

// –û—Ç—Ä–∏–º—É—î–º–æ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
const notifications = computed<AdminNotification[]>(() => {
  // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–µ–º–æ-–¥–∞–Ω—ñ, –≤—ñ–¥—Å–æ—Ä—Ç–æ–≤–∞–Ω—ñ –∑–∞ –¥–∞—Ç–æ—é (–Ω–æ–≤—ñ –∑–≤–µ—Ä—Ö—É)
  return getDemoNotifications().sort((a, b) => 
    new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
  );
});

// –¢–æ–ø —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º
const topStudents = computed(() => {
  return [...projectsStore.students]
    .sort((a, b) => b.rating - a.rating)
    .slice(0, 10); // –¢–æ–ø 10 —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤
});

const formatTime = (date: Date): string => {
  const now = new Date();
  const notificationDate = new Date(date);
  const diffTime = now.getTime() - notificationDate.getTime();
  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
  const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
  const diffMinutes = Math.floor(diffTime / (1000 * 60));

  if (diffMinutes < 60) {
    return `${diffMinutes} —Ö–≤–∏–ª–∏–Ω —Ç–æ–º—É`;
  } else if (diffHours < 24) {
    return `${diffHours} –≥–æ–¥–∏–Ω —Ç–æ–º—É`;
  } else if (diffDays === 1) {
    return '–í—á–æ—Ä–∞';
  } else if (diffDays < 7) {
    return `${diffDays} –¥–Ω—ñ–≤ —Ç–æ–º—É`;
  } else {
    return notificationDate.toLocaleString('uk-UA', {
      day: '2-digit',
      month: '2-digit',
      year: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  }
};

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—É –¥–ª—è —Ç–∏–ø—É —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
const getNotificationColor = (type: AdminNotification['type']): string => {
  const colorMap: Record<AdminNotification['type'], string> = {
    new_user_registration: 'bg-blue-500',
    project_created: 'bg-green-500',
    system_alert: 'bg-red-500',
    user_report: 'bg-orange-500',
    system_update: 'bg-purple-500',
  };
  return colorMap[type] || 'bg-savoy';
};

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—É –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥—É
const getRankColor = (index: number): string => {
  if (index === 0) return 'bg-yellow-500'; // –ó–æ–ª–æ—Ç–æ –¥–ª—è 1 –º—ñ—Å—Ü—è
  if (index === 1) return 'bg-gray-400'; // –°—Ä—ñ–±–ª–æ –¥–ª—è 2 –º—ñ—Å—Ü—è
  if (index === 2) return 'bg-amber-600'; // –ë—Ä–æ–Ω–∑–∞ –¥–ª—è 3 –º—ñ—Å—Ü—è
  return 'bg-gray-300'; // –°—ñ—Ä–∏–π –¥–ª—è —ñ–Ω—à–∏—Ö
};

// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –¥–∞–Ω—ñ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ
onMounted(async () => {
  try {
    await projectsStore.loadAll();
  } catch (error) {
    console.error('Failed to load data:', error);
  }
});
</script>

